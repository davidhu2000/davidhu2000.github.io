---
import PageLayout from "../../layouts/PageLayout.astro";
import { SITE } from "../../config";
import BlogList from "../../layouts/BlogList.astro";
import type { IStaticPathProps } from "../../helpers/staticPathProps";
import { getPosts } from "../../helpers/getPosts";

export async function getStaticPaths({ paginate }: IStaticPathProps) {
  const posts = getPosts();

  return paginate(posts, {
    pageSize: SITE.postsPerPage,
  });
}

const { page } = Astro.props;

const currentPage = page.currentPage ?? 1;

const title = `Blog ${currentPage > 1 ? `— Page ${currentPage} ` : ""}— ${
  SITE.name
}`;
const description = "The list of blog posts written by David Hu";
const canonical = new URL("/blog", Astro.site);
---

<PageLayout meta={{ title, description, canonical }}>
  <BlogList title={`Here Lies My Articles...`} page={page} />
</PageLayout>
